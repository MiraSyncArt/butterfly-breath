<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lunawake AI • CES 2026 Demo - Smart Morning Alarm</title>
  <style>
    :root {
      --bg0: #0a0b0f;
      --bg1: #151722;
      --bg2: #1f2332;
      --grid: rgba(255,255,255,.015);
      --grid-line: rgba(255,255,255,.04);
      --text: #e8ecf6;
      --muted: #9aa3b2;
      --wing-speed: .9s;
      --breath-speed: 5s;
      --base-offset: 0px;
      --wing-amplitude: 30px;
      --squash: .82;
      --left-shift: 0px;
      --right-shift: 0px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      background-color: var(--bg0);
      background-image:
        linear-gradient(var(--grid) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid) 1px, transparent 1px),
        radial-gradient(1400px 900px at 65% 15%, var(--bg2), var(--bg1) 60%, var(--bg0));
      background-size: 24px 24px, 24px 24px, 100% 100%;
      color: var(--text);
      font: 500 16px / 1.5 Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial;
    }

    .wrap {
      min-height: 100%;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    header, footer {
      padding: 16px 24px;
      opacity: 0.9;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: linear-gradient(145deg, rgb(255, 106, 106), rgb(255, 145, 81));
      box-shadow: rgba(255, 120, 90, 0.45) 0px 0px 18px;
    }

    .toolbar {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .stage {
      display: grid;
      place-items: center;
      padding: 12px;
    }

    .canvas {
      position: relative;
      width: min(1600px, 95vw);
      height: 70vh;
      min-height: 600px;
      border-radius: 24px;
      background:
        linear-gradient(var(--grid-line) 1px, transparent 1px),
        linear-gradient(90deg, var(--grid-line) 1px, transparent 1px),
        linear-gradient(135deg, rgba(255, 255, 255, 0.06) 0%, rgba(255, 255, 255, 0.02) 100%);
      background-size: 20px 20px, 20px 20px, 100% 100%;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow:
        rgba(0, 0, 0, 0.4) 0px 25px 70px,
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      overflow: hidden;
      backdrop-filter: blur(20px);
    }

    .headline {
      position: absolute;
      top: 28px;
      left: 50%;
      transform: translateX(-50%);
      font-weight: 700;
      letter-spacing: -0.02em;
      text-align: center;
      font-size: clamp(22px, 3.2vw, 34px);
      white-space: nowrap;
      transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
    }

    .metrics {
      position: absolute;
      bottom: 22px;
      left: 22px;
      display: flex;
      gap: 14px;
      flex-wrap: wrap;
    }

    .metric {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 12px 14px;
      border-radius: 14px;
      min-width: 130px;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    }

    .metric .label {
      color: var(--muted);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .metric .value {
      font-size: 28px;
      font-weight: 700;
      font-variant-numeric: tabular-nums;
      min-width: 85px;
      display: inline-block;
    }

    .butterfly {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .core {
      position: relative;
      width: min(350px, 22vw);
      height: min(250px, 14vw);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .wing {
      position: absolute;
      top: 10%;
      bottom: 10%;
      width: 44%;
    }

    .wing.left {
      left: 6%;
      transform-origin: right center;
    }

    .wing.right {
      right: 6%;
      transform-origin: left center;
    }

    .core.flap .left {
      animation: wingL var(--wing-speed) cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
    }

    .core.flap .right {
      animation: wingR var(--wing-speed) cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
    }

    .core.heart-sync {
      filter: drop-shadow(0 0 20px rgba(255, 106, 106, 0.6));
      transform: scale(1.02);
    }

    .headline.updating {
      color: rgba(255, 145, 81, 0.9);
      text-shadow: 0 0 10px rgba(255, 145, 81, 0.3);
    }

    @keyframes wingL {
      0% { transform: scaleX(1) rotateY(0deg); }
      25% { transform: scaleX(0.85) rotateY(-8deg); }
      50% { transform: scaleX(0.5) rotateY(-20deg); }
      75% { transform: scaleX(0.8) rotateY(-10deg); }
      100% { transform: scaleX(1) rotateY(0deg); }
    }

    @keyframes wingR {
      0% { transform: scaleX(1) rotateY(0deg); }
      25% { transform: scaleX(0.85) rotateY(8deg); }
      50% { transform: scaleX(0.5) rotateY(20deg); }
      75% { transform: scaleX(0.8) rotateY(10deg); }
      100% { transform: scaleX(1) rotateY(0deg); }
    }

    .wing svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    .aura {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      filter: blur(28px);
      opacity: 0.6;
      pointer-events: none;
    }

    .aura .blob {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      background: radial-gradient(circle at 40% 40%, rgba(255, 145, 81, 0.75), rgba(255, 106, 106, 0.5), transparent 70%);
      animation: breath var(--breath-speed) ease-in-out infinite;
    }

    @keyframes breath {
      0% { transform: scale(0.92); }
      50% { transform: scale(1.06); }
      100% { transform: scale(0.92); }
    }

    .hint {
      position: absolute;
      bottom: 22px;
      right: 22px;
    }

    .sleepcard {
      position: absolute;
      top: 50%;
      right: 22px;
      transform: translateY(-50%);
      display: grid;
      gap: 8px;
      min-width: 220px;
    }

    .sleepcard .row {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 8px 12px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
    }

    .sleepcard .k {
      color: var(--muted);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .sleepcard .v {
      font-weight: 700;
      font-variant-numeric: tabular-nums;
      min-width: 70px;
      display: inline-block;
      text-align: right;
    }

    .chip {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.15);
      padding: 8px 12px;
      border-radius: 20px;
      font-size: 12px;
      color: var(--muted);
    }

    .demo-button {
      background: none;
      border: 1px solid rgba(255,255,255,0.3);
      color: inherit;
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 11px;
      cursor: pointer;
      margin-left: 8px;
    }

    .demo-button:hover {
      background: rgba(255,255,255,0.1);
    }

    .demo-button.active {
      background: rgba(255, 106, 106, 0.3);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand"><span class="dot"></span><strong>Lunawake AI • Smart Morning Alarm Clock</strong></div>
      <div class="toolbar"></div>
    </header>

    <main class="stage">
      <section class="canvas" id="canvas">
        <div class="headline" id="headline">AI Sleep Monitor detecting your presence...</div>

        <div class="butterfly">
          <div class="aura"><div class="blob"></div></div>
          <div class="core flap" id="core">
            <div class="wing left">
              <svg viewBox="0 0 40 62" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <path id="wingPathL" d="M15.1544 61.8112C32.16 57.4157 42.5533 40.2467 38.3686 23.4632C34.1838 6.6796 17.0056 -3.36292 0 1.03257C0 1.03257 3.39183 14.6385 7.57659 31.4221C11.7614 48.2056 15.1544 61.8112 15.1544 61.8112Z" fill="url(#gradWingL)"></path>
                <defs>
                  <linearGradient id="gradWingL" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#FD975A"></stop>
                    <stop offset="100%" stop-color="#F34444"></stop>
                  </linearGradient>
                </defs>
              </svg>
            </div>
            <div class="wing right">
              <svg viewBox="0 0 40 62" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <path id="wingPathR" d="M24.8456 61.8112C7.84 57.4157 -2.5533 40.2467 1.6314 23.4632C5.8162 6.6796 22.9944 -3.36292 40 1.03257C40 1.03257 36.6082 14.6385 32.4234 31.4221C28.2386 48.2056 24.8456 61.8112 24.8456 61.8112Z" fill="url(#gradWingR)"></path>
                <defs>
                  <linearGradient id="gradWingR" x1="1" y1="0" x2="0" y2="1">
                    <stop offset="0%" stop-color="#FD975A"></stop>
                    <stop offset="100%" stop-color="#F34444"></stop>
                  </linearGradient>
                </defs>
              </svg>
            </div>
          </div>
        </div>

        <div class="metrics">
          <div class="metric"><div class="label">Heart rate</div><div class="value"><span id="hr">69</span> bpm</div></div>
          <div class="metric"><div class="label">Respiratory rate</div><div class="value"><span id="br">18</span> rpm</div></div>
        </div>

        <div class="sleepcard" id="sleepcard">
          <div class="row"><span class="k">Sleep Time</span><span class="v" id="sleepTime">11:08 pm</span></div>
          <div class="row"><span class="k">Wake Window</span><span class="v" id="wakeWindow">6:40–7:10 am</span></div>
          <div class="row"><span class="k">Duration</span><span class="v" id="duration">7h 32m</span></div>
          <div class="row"><span class="k">Deep Sleep</span><span class="v" id="deepSleep">1h 32m</span></div>
          <div class="row"><span class="k">Time to Sleep</span><span class="v" id="tts">13m</span></div>
        </div>

        <div class="hint chip">
          <span id="modeIndicator">Heart rate synced butterfly • AI sleep alarm demo</span>
          <button id="demoButton" class="demo-button">Demo Mode</button>
        </div>
      </section>
    </main>

    <footer>
      <small>© <span id="year">2025</span> Lunawake — No camera. No raw audio recording. Vital signs processed locally; encrypted cloud backup optional.</small>
    </footer>
  </div>

  <script>
    // Update year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Heart rate and breathing data management
    var currentHeartRate = 69;
    var currentBreathRate = 18;
    var breathingPhase = 0;
    var demoMode = false;
    var demoHeartRates = [65, 72, 68, 85, 78, 63, 90, 75];
    var demoIndex = 0;
    var demoInterval;

    // CES booth specialized: AI morning alarm message library
    var smartMessages = {
      detecting: [
        "📡 AI Sleep Monitor detecting your presence...",
        "🔍 Lunawake is scanning your vital signs",
        "⚙️ Calibrating to your unique sleep rhythm",
        "👁️ Millimeter wave sensor activated"
      ],
      restful: [
        "🌅 Rise and shine! Your calm heart rate shows perfect sleep",
        "☀️ Good morning, sleepyhead! Time for a gentle wake-up",
        "😌 Wakey wakey! Your peaceful rhythm deserves a soft alarm",
        "🌸 Morning bloom! Your rested heart beats beautifully",
        "🕊️ Gentle wake-up call for your serene sleep pattern"
      ],
      elevated: [
        "⏰ Good morning! Your active heart suggests you're ready to rise",
        "🚀 Wake-up boost! Your elevated pulse means energy awaits",
        "⚡ Morning charge! Your heart rate shows you're primed for action",
        "🔥 Power wake-up! Your vitals indicate high energy reserves",
        "💪 Strong morning! Your elevated pulse means go-time"
      ],
      active: [
        "🏃‍♀️ Already moving? Perfect time for your personalized alarm!",
        "🎯 Morning warrior! Your heart rate shows you're ready to conquer",
        "⭐ Superstar wake-up! Your active vitals mean it's showtime",
        "🌟 Dynamic morning! Your pulse pattern suggests peak readiness",
        "🚀 Blast-off wake-up! Your heart rate indicates launch mode"
      ],
      leaving: [
        "🌅 Early bird wake-up! Your rhythm shows dawn patrol energy",
        "🏃‍♂️ Sprint start! Your heart rate suggests morning jog time",
        "☕ Coffee run wake-up! Your pulse indicates caffeine calling",
        "💼 Work mode activated! Your vitals show productivity peaks",
        "🌍 Adventure wake-up! Your heart rate screams 'seize the day'"
      ],
      returning: [
        "🛏️ Back to bed? Your heart rate suggests snooze mode",
        "😴 Cozy wake-up! Your settled pulse means comfort zone time",
        "🧘‍♀️ Zen morning! Your calm rhythm suggests mindful wake-up",
        "🌊 Flow state wake-up! Your steady heart beats with the tide",
        "🍃 Natural wake-up! Your gentle rhythm follows nature's pace"
      ],
      irregular: [
        "🎼 Unique rhythm! Your irregular heartbeat needs a custom alarm",
        "🎭 Dynamic wake-up! Your varied pulse creates personalized timing",
        "🎨 Artistic morning! Your heart paints its own wake-up pattern",
        "🌈 Rainbow wake-up! Your diverse rhythm spans every mood",
        "🎪 Carnival morning! Your playful heartbeat sets the celebration"
      ],
      peaceful: [
        "😇 Angelic wake-up! Your peaceful heart deserves heaven's alarm",
        "🌙 Dream transition! Your calm pulse guides gentle awakening",
        "✨ Magic morning! Your serene heartbeat creates perfect timing",
        "🕯️ Candlelight wake-up! Your soft rhythm glows into morning",
        "🦋 Butterfly emergence! Your gentle pulse mirrors transformation"
      ]
    };

    var currentMessageCategory = "detecting";
    var lastHeartRatePattern = [];
    var messageChangeTimer = 0;

    // Sleep data management
    var sleepData = {
      sleepTime: "11:08 pm",
      wakeWindow: "6:40–7:10 am",
      duration: "7h 32m",
      deepSleep: "1h 32m",
      timeToSleep: "13m"
    };

    // TV optimized: super smooth heart rate sync algorithm
    function updateWingFlutterToHeartRate() {
      var heartRateElement = document.getElementById('hr');
      var heartRate = parseFloat(heartRateElement.textContent);
      var coreElement = document.getElementById('core');

      // Direct mapping of heart rate to flutter speed, optimized for TV display
      // Heart rate range: 60-100 bpm -> flutter speed: 0.8-1.8 seconds
      var flutterSpeed;
      if (heartRate < 60) {
        flutterSpeed = 1.8;
      } else if (heartRate > 100) {
        flutterSpeed = 0.8;
      } else {
        // Linear mapping: 60bpm->1.8s, 100bpm->0.8s
        flutterSpeed = 1.8 - ((heartRate - 60) / 40) * 1.0;
      }

      // Reduce natural variation to ensure TV display stability
      var naturalVariation = 1 + (Math.sin(Date.now() / 8000) * 0.03);
      var finalSpeed = flutterSpeed * naturalVariation;

      // Update immediately
      document.documentElement.style.setProperty('--wing-speed', finalSpeed.toFixed(3) + 's');

      // Booth enhancement: heart rate sync visual feedback
      if (heartRate > 75) {
        coreElement.classList.add('heart-sync');
      } else {
        coreElement.classList.remove('heart-sync');
      }
    }

    // Add realistic heart rate variability
    function addRealisticHeartRateVariability() {
      setInterval(function() {
        if (demoMode) return; // Skip if in demo mode

        var baseHeartRate = 69;
        var currentTime = Date.now();

        // Respiratory sinus arrhythmia
        var breathCycleDuration = (60 / currentBreathRate) * 1000;
        breathingPhase = ((currentTime % breathCycleDuration) / breathCycleDuration) * 2 * Math.PI;
        var respiratoryVariation = Math.sin(breathingPhase) * 2;

        // Natural heart rate variability
        var hrv = (Math.random() - 0.5) * 3;

        // Long-term trend changes
        var longTermTrend = Math.sin(currentTime / 25000) * 1.5;

        // Calculate final heart rate
        var finalHeartRate = Math.max(50, Math.min(100,
          baseHeartRate + respiratoryVariation + hrv + longTermTrend
        ));

        currentHeartRate = finalHeartRate;

        // Update display
        document.getElementById('hr').textContent = finalHeartRate.toFixed(1);

        // Real-time update of wing flutter speed
        updateWingFlutterToHeartRate();

        // Update smart headline
        updateSmartHeadline(finalHeartRate);

      }, 200);
    }

    // Enhanced breathing variability
    function addEnhancedBreathingVariability() {
      setInterval(function() {
        var baseBreathRate = 18;

        // Deep breathing cycle changes
        var deepBreathCycle = Math.sin(Date.now() / 15000) * 1.2;

        // Physiological coupling with heart rate
        var heartRateCoupling = (currentHeartRate - 69) * 0.05;

        // Sleep state effects
        var sleepEffect = Math.sin(Date.now() / 120000) * -0.8;

        // Natural random variation
        var naturalVariation = (Math.random() - 0.5) * 1.2;

        // Breathing phase sync effect
        var breathPhaseEffect = Math.cos(breathingPhase * 0.5) * 0.3;

        var finalBreathRate = Math.max(12, Math.min(24,
          baseBreathRate + deepBreathCycle + heartRateCoupling + sleepEffect + naturalVariation + breathPhaseEffect
        ));

        currentBreathRate = finalBreathRate;
        document.getElementById('br').textContent = finalBreathRate.toFixed(1);

      }, 2000);
    }

    // CES booth optimized: more sensitive heart rate response system
    function updateSmartHeadline(currentHR) {
      // Record heart rate pattern for analysis (shorter history for booth environment)
      lastHeartRatePattern.push(currentHR);
      if (lastHeartRatePattern.length > 10) {
        lastHeartRatePattern.shift();
      }

      messageChangeTimer++;

      // More frequent updates (every 15 updates ~3 seconds) to improve booth interactivity
      if (messageChangeTimer >= 15) {
        messageChangeTimer = 0;
        analyzeHeartRatePattern();
      }
    }

    // CES booth optimized: more sensitive heart rate pattern analysis
    function analyzeHeartRatePattern() {
      if (lastHeartRatePattern.length < 5) return;

      var recentHR = lastHeartRatePattern.slice(-5);
      var avgHR = recentHR.reduce(function(a, b) { return a + b; }, 0) / recentHR.length;
      var hrVariability = Math.max.apply(Math, recentHR) - Math.min.apply(Math, recentHR);
      var trend = recentHR[recentHR.length - 1] - recentHR[0];

      var newCategory = currentMessageCategory;

      // Booth environment optimized state judgment (more relaxed thresholds)
      if (avgHR < 60) {
        newCategory = "peaceful";
      } else if (avgHR < 70 && hrVariability < 8) {
        newCategory = "restful";
      } else if (avgHR > 80) {
        if (trend > 3) {
          newCategory = "active";
        } else if (trend < -3) {
          newCategory = "returning";
        } else {
          newCategory = "elevated";
        }
      } else if (avgHR > 90) {
        newCategory = "leaving";
      } else if (hrVariability > 10) {
        newCategory = "irregular";
      } else {
        newCategory = "restful";
      }

      // More frequent message updates in booth environment (60% probability)
      if (newCategory !== currentMessageCategory || Math.random() > 0.4) {
        currentMessageCategory = newCategory;
        updateHeadlineMessage();
      }
    }

    function updateHeadlineMessage() {
      var messages = smartMessages[currentMessageCategory];
      var randomMessage = messages[Math.floor(Math.random() * messages.length)];

      var headlineElement = document.getElementById('headline');

      // Booth enhancement: more obvious message update effect
      headlineElement.classList.add('updating');
      headlineElement.style.opacity = '0.3';
      headlineElement.style.transform = 'translateX(-50%) translateY(-5px)';

      setTimeout(function() {
        headlineElement.textContent = randomMessage;
        // Fade in effect
        headlineElement.style.opacity = '1';
        headlineElement.style.transform = 'translateX(-50%) translateY(0)';

        // Remove update style
        setTimeout(function() {
          headlineElement.classList.remove('updating');
        }, 1000);
      }, 600);
    }

    // CES booth demo mode functionality
    function toggleDemoMode() {
      demoMode = !demoMode;
      var button = document.getElementById('demoButton');
      var indicator = document.getElementById('modeIndicator');

      if (demoMode) {
        button.textContent = 'Stop Demo';
        button.classList.add('active');
        indicator.textContent = 'DEMO MODE: Simulating different heart rates';
        startDemo();
      } else {
        button.textContent = 'Demo Mode';
        button.classList.remove('active');
        indicator.textContent = 'Heart rate synced butterfly • AI sleep alarm demo';
        stopDemo();
      }
    }

    function startDemo() {
      // Switch to a new demo heart rate every 3 seconds
      demoInterval = setInterval(function() {
        var demoHR = demoHeartRates[demoIndex];
        document.getElementById('hr').textContent = demoHR;
        currentHeartRate = demoHR;

        // Force update butterfly flutter and message
        updateWingFlutterToHeartRate();
        updateSmartHeadline(demoHR);

        demoIndex = (demoIndex + 1) % demoHeartRates.length;
      }, 3000);
    }

    function stopDemo() {
      if (demoInterval) {
        clearInterval(demoInterval);
      }
      // Resume normal simulation
      addRealisticHeartRateVariability();
    }

    // Simulate sleep data based on heart rate slow changes
    function simulateSleepDataBasedOnHeartRate() {
      setInterval(function() {
        var avgHeartRate = currentHeartRate;

        // Calculate sleep quality indicators based on heart rate
        var heartRateStress = Math.abs(avgHeartRate - 65);
        var sleepQuality = Math.max(0.3, 1 - heartRateStress / 30);

        // Dynamically adjust deep sleep time
        var baseDeepSleep = 92;
        var deepSleepVariation = (sleepQuality - 0.5) * 40;
        var finalDeepSleep = Math.max(45, Math.min(140, baseDeepSleep + deepSleepVariation));

        var deepHours = Math.floor(finalDeepSleep / 60);
        var deepMinutes = Math.round(finalDeepSleep % 60);
        sleepData.deepSleep = deepHours + 'h ' + deepMinutes + 'm';

        // Dynamically adjust time to sleep
        var baseTTS = 13;
        var ttsVariation = (avgHeartRate - 65) * 0.3;
        var finalTTS = Math.max(3, Math.min(25, baseTTS + ttsVariation));
        sleepData.timeToSleep = Math.round(finalTTS) + 'm';

        // Dynamically adjust total sleep duration
        var baseDuration = 452;
        var durationVariation = sleepQuality * 30 - 15;
        var finalDuration = Math.max(360, Math.min(540, baseDuration + durationVariation));

        var totalHours = Math.floor(finalDuration / 60);
        var totalMinutes = Math.round(finalDuration % 60);
        sleepData.duration = totalHours + 'h ' + totalMinutes + 'm';

        // Update display
        document.getElementById('deepSleep').textContent = sleepData.deepSleep;
        document.getElementById('tts').textContent = sleepData.timeToSleep;
        document.getElementById('duration').textContent = sleepData.duration;

      }, 15000);
    }

    // Simulate time-related sleep data changes
    function simulateTimeBasedSleepUpdates() {
      setInterval(function() {
        var now = new Date();
        var currentMinutes = now.getHours() * 60 + now.getMinutes();

        // Simulate sleep time fine-tuning
        var heartRateTrend = (currentHeartRate - 69) / 10;

        // Sleep time fine-tuning
        var baseHour = 23;
        var baseMinute = 8;
        var timeAdjustment = Math.round(heartRateTrend * 3);

        var adjustedMinute = baseMinute + timeAdjustment;
        var adjustedHour = baseHour;

        if (adjustedMinute < 0) {
          adjustedMinute += 60;
          adjustedHour -= 1;
        } else if (adjustedMinute >= 60) {
          adjustedMinute -= 60;
          adjustedHour += 1;
        }

        // Format time display
        var sleepTimeStr = (adjustedHour === 12 ? 12 : adjustedHour % 12) + ':' +
                          (adjustedMinute < 10 ? '0' : '') + adjustedMinute +
                          (adjustedHour >= 12 ? ' pm' : ' am');
        sleepData.sleepTime = sleepTimeStr;

        // Adjust wake window accordingly
        var wakeHour = 6 + Math.round(timeAdjustment / 10);
        var wakeEndHour = wakeHour + 1;
        sleepData.wakeWindow = wakeHour + ':40–' + wakeEndHour + ':10 am';

        // Update display
        document.getElementById('sleepTime').textContent = sleepData.sleepTime;
        document.getElementById('wakeWindow').textContent = sleepData.wakeWindow;

      }, 45000);
    }

    // Initialize all functions
    updateWingFlutterToHeartRate();
    addRealisticHeartRateVariability();
    addEnhancedBreathingVariability();
    simulateSleepDataBasedOnHeartRate();
    simulateTimeBasedSleepUpdates();

    // Bind demo mode button and keyboard shortcuts
    document.getElementById('demoButton').addEventListener('click', toggleDemoMode);

    // Booth shortcuts: press 'D' key to quickly toggle demo mode
    document.addEventListener('keydown', function(event) {
      if (event.key === 'd' || event.key === 'D') {
        toggleDemoMode();
      }
      // Press 'R' key to reset to initial state
      if (event.key === 'r' || event.key === 'R') {
        location.reload();
      }
    });

    // Initial message setup
    setTimeout(function() {
      updateHeadlineMessage();
    }, 1000);
  </script>
</body>
</html>